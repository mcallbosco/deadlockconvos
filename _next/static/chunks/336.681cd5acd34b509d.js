"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[336],{71:(e,r,t)=>{t.d(r,{h:()=>n});let s={inferno:"inferno",holliday:"astro",paradox:"chrono",orion:"archer",ghost:"spectre",vindicta:"hornet",seven:"gigawatt",atlas:"bull",forge:"engineer",dynamo:"sumo",calico:"nano",krill:"digger",fathom:"slork",pocket:"synth","the boss":"yakuza",viper:"kali","generic person":"genericperson","lady geist":"spectre","mo and krill":"digger",infernus:"inferno",mcginnis:"engineer","grey talon":"archer",ivy:"tengu",abrams:"bull"};function n(e){let r=e.toLowerCase();return s[r]?s[r]:r.replace(/\s+/g,"")}},3116:(e,r,t)=>{t.d(r,{B2:()=>l,n0:()=>n,tG:()=>i,yV:()=>a});let s="viewedConversations";function n(e){try{let r=o();r.includes(e)||(r.push(e),localStorage.setItem(s,JSON.stringify(r)))}catch(e){console.error("Error marking conversation as viewed:",e)}}function a(e){try{return o().includes(e)}catch(e){return console.error("Error checking if conversation is viewed:",e),!1}}function o(){try{let e=localStorage.getItem(s);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting viewed conversations:",e),[]}}function i(){try{localStorage.removeItem(s)}catch(e){console.error("Error resetting viewed conversations:",e)}}function l(e,r){try{let t=o(),n=r.filter(r=>r.character1===e||r.character2===e).map(e=>e.conversation_id),a=t.filter(e=>!n.includes(e));localStorage.setItem(s,JSON.stringify(a))}catch(e){console.error("Error resetting character viewed conversations:",e)}}},4957:(e,r,t)=>{t.d(r,{v:()=>n});let s={inferno:"Infernus",gigawatt:"Seven",hornet:"Vindicta",ghost:"Lady Geist",tempest:"Tempest",atlas:"Abrams",wraith:"Wraith",forge:"McGinnis",chrono:"Paradox",sumo:"Dynamo",kelvin:"Kelvin",haze:"Haze",astro:"Holliday",bebop:"Bebop",nano:"Calico",orion:"Grey Talon",krill:"Mo and Krill",shiv:"Shiv",tengu:"Ivy",kali:"Kali",warden:"Warden",yamato:"Yamato",butcher:"Butcher",lash:"Lash",akimbo:"Akimbo",viscous:"Viscous",ballista:"Ballista",gunslinger:"Gunslinger",yakuza:"The Boss",spade:"Spade",genericperson:"Generic Person",tokamak:"Tokamak",wrecker:"Wrecker",rutger:"Rutger",synth:"Pocket",thumper:"Thumper",mirage:"Mirage",slork:"Fathom",cadence:"Cadence",targetdummy:"Target Dummy",bomber:"Bomber",viper:"Vyper","generic person":"Generic Person",generic:"Generic Person",mo:"Mo and Krill","the boss":"The Boss","grey talon":"Grey Talon","lady geist":"Lady Geist"};function n(e){return s[e.toLowerCase()]?s[e.toLowerCase()]:e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},6046:(e,r,t)=>{var s=t(6658);t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},7336:(e,r,t)=>{t.r(r),t.d(r,{default:()=>x});var s=t(5155),n=t(2115),a=t(9232),o=t(5565),i=t(8173),l=t.n(i),c=t(4957),m=t(71),d=t(6046),h=t(3116);let u="previousPath",g="selectedPartners",p="filtersCleared";function x(e){let{character:r,conversations:t}=e,[i,x]=(0,n.useState)(!0),[v,f]=(0,n.useState)([]),w=(0,d.usePathname)(),b=(0,d.useRouter)();(0,n.useEffect)(()=>{{let e=()=>{sessionStorage.setItem(u,w)};if(window.addEventListener("beforeunload",e),"true"===sessionStorage.getItem(p))sessionStorage.removeItem(p);else{let e=sessionStorage.getItem(g);if(e)try{let t=JSON.parse(e);if(Array.isArray(t)){let e=t.filter(e=>r.conversationPartners.includes(e));f(e)}}catch(e){console.error("Error parsing selected partners:",e)}}return()=>{window.removeEventListener("beforeunload",e)}}},[w,r.conversationPartners]),(0,n.useEffect)(()=>{v.length>0?sessionStorage.setItem(g,JSON.stringify(v)):sessionStorage.removeItem(g)},[v]);let y=(0,c.v)(r.name),j=[...t.filter(e=>{if(!i&&!e.is_complete)return!1;if(v.length>0){let t=e.character1===r.name?e.character2:e.character1;return v.includes(t)}return!0})].sort((e,t)=>{if(e.is_complete&&!t.is_complete)return -1;if(!e.is_complete&&t.is_complete)return 1;let s=e.character1===r.name?e.character2:e.character1,n=t.character1===r.name?t.character2:t.character1;return s.localeCompare(n)}),N=e=>{let r=(0,m.h)(e);return"/minimapIcons/".concat(r,"_mm_psd.png")},k=e=>{f(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},S=e=>{sessionStorage.setItem(u,w),v.length>0?sessionStorage.setItem(g,JSON.stringify(v)):sessionStorage.removeItem(g),window.location.href="/conversations/".concat(encodeURIComponent(e))};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)(l(),{href:"/",className:"inline-flex items-center text-blue-400 hover:underline",onClick:()=>{sessionStorage.setItem(u,"/"),sessionStorage.removeItem(g),sessionStorage.setItem(p,"true")},children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Home"]}),(0,s.jsxs)("button",{onClick:()=>{sessionStorage.setItem(u,"/conversations"),sessionStorage.removeItem(g),sessionStorage.setItem(p,"true"),b.push("/conversations")},className:"inline-flex items-center text-blue-400 hover:underline bg-transparent border-none cursor-pointer",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Go to Search"]})]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[(0,s.jsx)("div",{className:"w-full md:w-1/3 lg:w-1/4 md:h-screen md:sticky md:top-0 md:self-start",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 overflow-y-auto h-auto md:max-h-[calc(100vh-2rem)] md:my-4",children:[(0,s.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:(0,s.jsx)(o.default,{src:N(r.name),alt:"".concat(y," portrait"),fill:!0,sizes:"128px",className:"object-cover rounded-full",onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-white text-center mb-4",children:y}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-white mb-3",children:"Conversation Partners"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[v.length>0&&(0,s.jsx)("button",{onClick:()=>{f([]),sessionStorage.setItem(p,"true"),sessionStorage.removeItem(g)},className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:"Clear All Filters"}),r.conversationPartners.map(e=>(0,s.jsxs)("button",{onClick:()=>k(e),className:"px-3 py-1 rounded-full text-sm flex items-center ".concat(v.includes(e)?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,s.jsx)("div",{className:"relative w-4 h-4 mr-1",children:(0,s.jsx)(o.default,{src:N(e),alt:"".concat((0,c.v)(e)," portrait"),fill:!0,sizes:"16px",className:"object-cover rounded-full",onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,c.v)(e)]},e))]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("label",{className:"flex items-center text-white cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:i,onChange:()=>x(!i),className:"mr-2 h-4 w-4"}),"Show Incomplete Conversations"]})}),(0,s.jsx)("div",{className:"mt-4 pb-4",children:(0,s.jsx)("button",{onClick:()=>{(0,h.B2)(r.name,t),window.location.reload()},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Reset Viewed Conversations"})})]})}),(0,s.jsxs)("div",{className:"w-full md:w-2/3 lg:w-3/4",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-white mb-4",children:[v.length>0?"Conversations with ".concat(1===v.length?(0,c.v)(v[0]):"".concat(v.length," characters")):"All Conversations",(0,s.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-400",children:["(",j.length," ",1===j.length?"conversation":"conversations",")"]})]}),v.length>1&&(0,s.jsxs)("div",{className:"mb-4 flex flex-wrap gap-2 items-center",children:[(0,s.jsx)("span",{className:"text-gray-300",children:"Filtered by:"}),v.map(e=>(0,s.jsxs)("span",{className:"px-3 py-1 bg-blue-800 text-white rounded-full text-sm flex items-center",children:[(0,s.jsx)("div",{className:"relative w-4 h-4 mr-1",children:(0,s.jsx)(o.default,{src:N(e),alt:"".concat((0,c.v)(e)," portrait"),fill:!0,sizes:"16px",className:"object-cover rounded-full",onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,c.v)(e),(0,s.jsx)("button",{onClick:()=>k(e),className:"ml-2 text-white hover:text-gray-200",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},e))]}),j.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:j.map(e=>(0,s.jsx)(a.A,{conversation:e,highlightCharacter:r.name,onClick:()=>S(e.conversation_id)},e.conversation_id))}):(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:(0,s.jsx)("p",{className:"text-gray-400",children:i?"No conversations found.":"No complete conversations found. Try enabling incomplete conversations."})})]})]})]})}},9232:(e,r,t)=>{t.d(r,{A:()=>c});var s=t(5155),n=t(2115),a=t(5565),o=t(4957),i=t(71),l=t(3116);let c=e=>{let{conversation:r,highlightCharacter:t,onClick:c}=e,{conversation_id:m,character1:d,character2:h,is_complete:u,missing_parts:g,summary:p,lines:x}=r,[v,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{f((0,l.yV)(m))},[m]);let w=t?d===t?h:d:null,b=(0,o.v)(d),y=(0,o.v)(h),j=w?(0,o.v)(w):null,N=w?"Conversation with ".concat(j):"".concat(b," & ").concat(y),k=p||(x.length>0?x[0].transcription:"No preview available"),S=e=>{let r=(0,i.h)(e);return"/minimapIcons/".concat(r,"_mm_psd.png")};return(0,s.jsx)("div",{className:"\n        bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 p-4 mb-4 \n        ".concat(u?"":"border-l-4 border-yellow-600"," \n        ").concat(v?"opacity-70 bg-gray-900":""," \n        ").concat(c?"cursor-pointer hover:bg-gray-750":"","\n      "),onClick:c,role:c?"button":void 0,tabIndex:c?0:void 0,onKeyDown:e=>{c&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c())},children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mr-4",children:t&&w?(0,s.jsx)("div",{className:"relative w-12 h-12",children:(0,s.jsx)(a.default,{src:S(w),alt:"".concat(j," portrait"),fill:!0,sizes:"48px",className:"object-cover rounded-full ".concat(v?"opacity-70":""),onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}):(0,s.jsxs)("div",{className:"flex -space-x-3",children:[(0,s.jsx)("div",{className:"relative w-12 h-12 z-10",children:(0,s.jsx)(a.default,{src:S(d),alt:"".concat(b," portrait"),fill:!0,sizes:"48px",className:"object-cover rounded-full border-2 border-gray-800 ".concat(v?"opacity-70":""),onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})}),(0,s.jsx)("div",{className:"relative w-12 h-12 z-0",children:(0,s.jsx)(a.default,{src:S(h),alt:"".concat(y," portrait"),fill:!0,sizes:"48px",className:"object-cover rounded-full border-2 border-gray-800 ".concat(v?"opacity-70":""),onError:e=>{e.target.src="/minimapIcons/genericperson_mm_psd.png"}})})]})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-white",children:N}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1 line-clamp-3",children:k}),(0,s.jsxs)("div",{className:"flex items-center mt-2",children:[!u&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-800 text-yellow-100 mr-2",children:"Incomplete"}),g.length>0&&(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-800 text-red-100",children:["Missing parts: ",g.join(", ")]}),v&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-800 text-blue-100 ml-auto",children:"Viewed"})]})]})]})})}}}]);